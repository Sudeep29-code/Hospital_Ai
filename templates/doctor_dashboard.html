<!DOCTYPE html>
<html>

<head>
    <title>Doctor Dashboard</title>
    <meta http-equiv="refresh" content="15">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <div class="header">
        <h2>Welcome Dr. {{ doctor_name }}</h2>
        <p>Department: {{ department }}</p>

        <h3>ðŸ“Š Doctor Analytics</h3>
        <p>Average Consultation Time: {{ avg_time }} mins</p>
        <p>Utilization: {{ utilization }}%</p>

        {% if bottleneck %}
        <div style="background:#ffcccc;padding:10px;margin:10px;">
            {{ recommendation }}
        </div>
        {% endif %}
    </div>

    <div class="container">

        <!-- Regular Queue -->
        <div class="section">
            <h3>ðŸŸ¢ Regular Queue</h3>

            <table>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Priority</th>
                    <th>Action</th>
                </tr>

                {% if regular_patients %}
                    {% for patient in regular_patients %}
                    <tr>
                        <td>{{ patient.id }}</td>
                        <td>{{ patient.name }}</td>
                        <td>{{ patient.priority }}</td>
                        <td>
                            <a href="/complete/{{ patient.id }}">
                                <button class="btn btn-complete">Completed</button>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="4" class="no-data">No Regular Patients</td>
                    </tr>
                {% endif %}
            </table>
        </div>

        <!-- Emergency Queue -->
        <div class="section">
            <h3 class="emergency-title">ðŸ”´ Emergency Queue</h3>

            <table>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Priority</th>
                    <th>Action</th>
                </tr>

                {% if emergency_patients %}
                    {% for patient in emergency_patients %}
                    <tr>
                        <td>{{ patient.id }}</td>
                        <td>{{ patient.name }}</td>
                        <td class="priority-high">{{ patient.priority }}</td>
                        <td>
                            <a href="/complete/{{ patient.id }}">
                                <button class="btn btn-complete">Completed</button>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="4" class="no-data">No Emergency Patients</td>
                    </tr>
                {% endif %}
            </table>
        </div>

    </div>

</body>
</html>
